<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Тест PeerJS</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <h1>Тест PeerJS</h1>
    <div id="status">Загрузка...</div>
    <div id="log"></div>

    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js?v=1"></script>
    <script>
        const status = document.getElementById('status');
        const log = document.getElementById('log');

        function addLog(message) {
            const div = document.createElement('div');
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            log.appendChild(div);
        }

        addLog('Проверка PeerJS...');

        if (typeof Peer === 'undefined') {
            status.textContent = '❌ PeerJS не загружен';
            addLog('Ошибка: PeerJS не найден');
        } else {
            status.textContent = '✅ PeerJS загружен';
            addLog('PeerJS успешно загружен');

            try {
                const peer = new Peer({
                    host: 'peerjs-server.herokuapp.com',
                    secure: true,
                    port: 443
                });

                peer.on('open', (id) => {
                    status.textContent = '✅ Подключен. ID: ' + id;
                    addLog('Подключение установлено. ID: ' + id);
                });

                peer.on('error', (err) => {
                    status.textContent = '❌ Ошибка: ' + err.type;
                    addLog('Ошибка: ' + err.type);
                });

            } catch (error) {
                status.textContent = '❌ Ошибка создания Peer';
                addLog('Ошибка создания Peer: ' + error.message);
            }
        }
    </script>
</body>
</html> 